function dsv(r){function n(n){return n.map(t).join(r)}function t(r){return e.test(r)?'"'+r.replace(/\"/g,'""')+'"':r}var o={},e=RegExp('["'+r+"\n]"),i=r.charCodeAt(0);return o.parse=function(r,n){var t;return o.parseRows(r,function(r,o){if(t)return t(r,o-1);var e=Function("d","return {"+r.map(function(r,n){return JSON.stringify(r)+": d["+n+"]"}).join(",")+"}");t=n?function(r,t){return n(e(r),t)}:e})},o.parseRows=function(r,n){function t(){if(s>=c)return a;if(e)return e=!1,u;var n=s;if(34===r.charCodeAt(n)){for(var t=n;c>t++;)if(34===r.charCodeAt(t)){if(34!==r.charCodeAt(t+1))break;++t}s=t+2;var o=r.charCodeAt(t+1);return 13===o?(e=!0,10===r.charCodeAt(t+2)&&++s):10===o&&(e=!0),r.substring(n+1,t).replace(/""/g,'"')}for(;c>s;){var o=r.charCodeAt(s++),f=1;if(10===o)e=!0;else if(13===o)e=!0,10===r.charCodeAt(s)&&(++s,++f);else if(o!==i)continue;return r.substring(n,s-f)}return r.substring(n)}for(var o,e,u={},a={},f=[],c=r.length,s=0,v=0;(o=t())!==a;){for(var d=[];o!==u&&o!==a;)d.push(o),o=t();(!n||(d=n(d,v++)))&&f.push(d)}return f},o.format=function(n){if(Array.isArray(n[0]))return o.formatRows(n);var e={},i=[];return n.forEach(function(r){for(var n in r)n in e||i.push(e[n]=n)}),[i.map(t).join(r)].concat(n.map(function(n){return i.map(function(r){return t(n[r])}).join(r)})).join("\n")},o.formatRows=function(r){return r.map(n).join("\n")},o}dsv.version="0.0.3",dsv.tsv=dsv("	"),dsv.csv=dsv(",");